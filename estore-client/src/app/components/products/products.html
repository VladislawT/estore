<div class="flex flex-wrap justify-evenly" style="display: flex; flex-wrap: wrap">
  @if (productsStoreItem.products().length === 0) {
    <div class="text-center w-full mt-10 text-[50px] text-grey-500 font-medium">
      <fa-icon [icon]="faBoxOpen"></fa-icon>
      <p>Товары не найдены</p>
    </div>
  } @else {
    @for (product of productsStoreItem.products(); track product.id) {
      <div class="" style="flex-wrap: wrap; min-width: 350px">
        <div class="mx-4 p-3 mt-4 flex flex-col rounded-lg shadow-md relative">
          <button
            type="button"
            class="absolute top-5 right-5 z-10 p-2 rounded-full bg-white/90 hover:bg-white shadow cursor-pointer transition-colors"
            (click)="toggleWishlist(product, $event)"
            [title]="wishlist.isInWishlist(product.id) ? 'Удалить из избранного' : 'Добавить в избранное'"
          >
            <fa-icon
              [icon]="wishlist.isInWishlist(product.id) ? faHeart : faHeartRegular"
              [style.color]="wishlist.isInWishlist(product.id) ? 'rgb(239, 68, 68)' : ''"
            ></fa-icon>
          </button>
          <div class="overflow-hidden rounded-md">
            @defer (on viewport) {
              <a routerLink="/home/product/{{ product.id }}">
                <img
                  class="rounded-md mx-auto transition-transform duration-300 ease-in-out transform hover:scale-110"
                  [src]="'assets/images/' + product.product_img"
                  [alt]="product.product_img"
                  srcset=""
                  style="max-width: 300px"
                />
              </a>
            } @placeholder {
              <p>Loading products...</p>
            }
          </div>
        </div>
        <div class="">
          @defer (on viewport) {
            <a routerLink="/home/product/{{ product.id }}">
              <h5>
                {{ product.product_name }}
              </h5>
            </a>
          } @placeholder {
            <p>Loading products...</p>
          }
          <p>{{ product.price | currency }}</p>
          @if (product.ratings > 0) {
            <ng-container>
              <app-ratings [score]="product.ratings"></app-ratings>
            </ng-container>
            <button
              class="flex items-center justify-center gap-2 mt-4 w-full py-2 text-white bg-black rounded-lg cursor-pointer hover:bg-grey-800 hover: transition-colors"
              (click)="addToCart(product)"
            >
              <fa-icon [icon]="faShoppingCart" class="text-lg"> </fa-icon>
              <span class="text-sm font-medium">Добавить в корзину</span>
            </button>
          }
        </div>
      </div>
    }
  }
</div>
